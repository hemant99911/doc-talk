# 2025 AI Agent Development Plan

This document outlines a phased approach to building a sophisticated AI agent, starting with a "Doc-Talk" chatbot and progressively adding more advanced features.

## Phase 1: Foundational RAG with LangChain

This phase focuses on building the "Doc-Talk" agent, a foundational RAG chatbot. The detailed plan for this phase is located in the [Doc-Talk Project Plan](./doc-talk/doc-talk-plan.md).

## Phase 2: Advanced Agentic Behavior with LangGraph

In this phase, we will evolve the application from a simple RAG chain into a cyclical, self-correcting agent using LangGraph. This will allow the agent to reason about the quality of its retrieved documents and improve its own queries.

### 2.1. Code Refactoring for Modularity
- **Create an `agent` directory:** All new LangGraph logic will reside in `doc-talk/agent/`.
  - `agent/graph.py`: Will contain the definition of the graph, its state, nodes, and edges.
  - `agent/chains.py`: Will contain the definitions for the individual LCEL chains used as nodes (e.g., grader, rewriter).
- **Simplify `main.py`:** The FastAPI application will be simplified to handle HTTP requests and delegate all core logic to the LangGraph agent.

### 2.2. LangGraph Agent Implementation
- **Define Graph State:** The agent's state will be a `TypedDict` that tracks `question`, `documents`, `generation`, and an `iterations` counter to prevent infinite loops.
- **Implement Graph Nodes:**
  - **`retrieve`:** Retrieves documents from the FAISS vector store.
  - **`grade_documents`:** A new chain that uses the LLM to determine if the retrieved documents are relevant to the question.
  - **`generate`:** The existing LCEL chain that generates an answer from the documents.
  - **`rewrite`:** A new chain that rephrases the user's question if the initial documents are not relevant.
- **Define Graph Edges:**
  - A conditional edge will be created after the `grade_documents` node.
    - If documents are relevant, the graph will proceed to the `generate` node.
    - If documents are not relevant, the graph will proceed to the `rewrite` node, which then loops back to `retrieve`.
- **Update Architecture Diagram:** A new diagram representing this cyclical flow will be added to the Memory Bank.

### 2.3. Add Tools to the Agent (Synthesis Agent)
- **Integrate Web Search Tool:** Use the Tavily Search API to give the agent access to web search capabilities. The user will need to provide a `TAVILY_API_KEY`.
- **Create a "Synthesis" Agent:** The agent will be upgraded to intelligently synthesize information from both the uploaded documents and the web.
- **Implement a `decide_if_web_search_needed` Node:** After retrieving from documents, a new LLM-powered node will decide if the found information is sufficient or if a web search is required to provide a complete answer.
- **Combine and Cite Sources:** The final generation prompt will be updated to instruct the LLM to create a single, coherent answer from both document and web sources, and to cite where each piece of information came from.
- **Update Frontend:** The UI will be updated to display the source of the information along with the answer.

## Phase 3: Production-Ready Application

This phase focuses on creating a user-friendly frontend and deploying the "Doc-Talk" application. The detailed plan for this phase is located in the [Doc-Talk Project Plan](./doc-talk/doc-talk-plan.md).
